(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{60506:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-market",function(){return a(12091)}])},32029:function(e,t,a){"use strict";a.d(t,{Z:function(){return x}});var n=a(85893),s=a(67294),i=a(17097),l=a(51523),o=a(72573),r=a(31139),c=a(96398),m=a(62361),d=a(48162),u=a(82727);function x(e){let{defaultValue:t,value:a,decimalCount:x=6,showArrowControls:p,showPlusMinusControls:h,minN:k=0,maxN:b,step:f=Number((1/10**Math.floor(x)).toFixed(x)),onInvalid:g,canNegative:v,onValid:N,skipAutoIncrease:S,skipAutoDecrease:j,increaseFn:Z,decreaseFn:C,prefix:w,prefixClassName:I,suffix:T,valueToStringOptions:y,...z}=e,[M,P,B]=(0,m.$)(t);(0,c.L)(()=>{P(a)},[a]);let E={canNegativeLetter:/^[0-9-,.]$/,canNegativeRegexpString:"^[0-9-]*[.,]?[0-9]{0,".concat(x,"}$"),decimalRegexpString:"^[0-9]*[.,]?[0-9]{0,".concat(x,"}$"),decimalLetter:/^[0-9,.]$/},_=(0,s.useRef)();(0,s.useEffect)(()=>{var e;let t=v?E.canNegativeLetter:E.decimalLetter,a=e=>{let a=e.key,n=a.length>1||t.test(a),s=e.ctrlKey||e.altKey;n||s||e.preventDefault()};return null===(e=_.current)||void 0===e||e.addEventListener("keydown",a,{capture:!0,passive:!1}),()=>{var e;null===(e=_.current)||void 0===e||e.removeEventListener("keydown",a,{capture:!0})}},[]);let L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user-input";if((0,i.ve)(e)){var a;P(e),null===(a=z.onUserInput)||void 0===a||a.call(z,e,{canSafelyCovertToNumber:Number(e)<Number.MAX_SAFE_INTEGER&&Number(e)>Number.MIN_SAFE_INTEGER,triggerBy:t})}},O=e=>{var t;let a=_.current;if(!a)return;null===(t=z.onDangerousValueChange)||void 0===t||t.call(z,e,a);let n=a.checkValidity();n&&(null==N||N()),n||null==g||g()},R=()=>{var e;let t=null!==(e=null==Z?void 0:Z((0,o.B)(B())))&&void 0!==e?e:(0,l.IH)((0,o.B)(B()),f),a=(0,l.uZ)(k,t,b),n=(0,o.B)(a);L(n,"increase-decrease"),O(n)},F=()=>{var e;let t=null!==(e=null==C?void 0:C((0,o.B)(B())))&&void 0!==e?e:(0,l.h9)((0,o.B)(B()),f),a=(0,l.uZ)(k,t,b),n=(0,o.B)(a);L(n,"increase-decrease"),O(n)};return(0,n.jsx)(u.Z,{inputMode:"decimal",inputHTMLProps:{pattern:v?E.canNegativeRegexpString:E.decimalRegexpString,inputMode:"decimal",min:String(k),max:b?String(b):void 0,step:f},...z,inputDomRef:(0,r.Z)(_,z.inputDomRef),pattern:new RegExp(v?E.canNegativeRegexpString:E.decimalRegexpString),value:M?(0,o.B)(M,y):"",defaultValue:(0,o.B)(t,y),onUserInput:e=>{L(e)},onDangerousValueChange:e=>{O(e)},prefix:w||(h?(0,n.jsx)(d.Z,{className:"text-light-blue clickable",heroIconName:"minus",size:"xs",onClick:F}):void 0),prefixClassName:I||"",suffix:T||(p?(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{className:"opacity-50 hover:opacity-100 clickable",heroIconName:"chevron-up",size:"xs",onClick:R,canLongClick:!0}),(0,n.jsx)(d.Z,{className:"opacity-50 hover:opacity-100 clickable",heroIconName:"chevron-down",size:"xs",onClick:F,canLongClick:!0})]}):h?(0,n.jsx)(d.Z,{className:"text-light-blue clickable",heroIconName:"plus",size:"xs",onClick:R}):void 0)})}},12091:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return T}});var n=a(85893),s=a(91371),i=a(26416),l=a(34003),o=a(3363),r=a(72573),c=a(8667),m=a(64529);let d=(0,m.Ue)(e=>({programId:(0,o.ZP)(i.krz.OPENBOOK_MARKET),minimumOrderSize:1,tickSize:.01}));var u=a(53002);let x=(0,c.Kb)(()=>async e=>{let{transactionCollector:t,baseUtils:{connection:a,owner:n}}=e,{programId:s,baseToken:m,quoteToken:x,minimumOrderSize:p,tickSize:h}=d.getState(),{txVersion:k}=u.Z.getState();(0,l.Z)(m,"please select a base token"),(0,l.Z)(x,"please select a quote token");let{innerTransactions:b,address:f}=await i._CO.makeCreateMarketInstructionSimple({connection:a,dexProgramId:(0,o.uI)(s),baseInfo:{mint:m.mint,decimals:m.decimals},quoteInfo:{mint:x.mint,decimals:x.decimals},lotSize:Number.parseFloat((0,r.B)(p)),tickSize:Number.parseFloat((0,r.B)(h)),wallet:n,makeTxVersion:k,lookupTableCache:c.eq});t.add(b,{txHistoryInfo:{title:"Create Market",description:"created new Market: ".concat((0,o.ZP)(f.marketId).slice(0,6),"...")},onTxAllSuccess(){d.setState({newCreatedMarketId:f.marketId})}})});var p=a(99522),h=a(43067),k=a(70745),b=a(54592),f=a(60421),g=a(48162),v=a(82727),N=a(29120),S=a(51800),j=a(92618),Z=a(4465),C=a(81451),w=a(87980),I=a(67294);function T(){return(0,n.jsxs)(N.Z,{mobileBarTitle:"Create Market",metaTitle:"Create Market - MakiDEX",contentButtonPaddingShorter:!0,children:[(0,n.jsx)("div",{className:"title text-2xl mobile:text-lg font-semibold justify-self-start text-white mb-4",children:"Create OpenBook Market"}),(0,n.jsx)(y,{})]})}function y(){let e=d(e=>e.programId),t=d(e=>e.baseToken),a=d(e=>e.quoteToken),i=d(e=>e.minimumOrderSize),l=d(e=>e.tickSize),o=d(e=>e.newCreatedMarketId),c=(0,s.ZP)(e=>e.isApprovePanelShown),m=(0,u.Z)(e=>e.connected);return(0,n.jsxs)(b.Z,{className:"gap-8 mx-auto w-[min(800px,100%)]",children:[(0,n.jsx)(z,{name:"OpenBook Program id",renderFormItem:(0,n.jsx)(v.Z,{disabled:!0,className:"pointer-events-none mobile:text-xs",value:e})}),(0,n.jsx)(z,{name:"Select tokens",renderFormItem:(0,n.jsxs)(f.Z,{className:"grid-cols-2 ".concat(o?"opacity-50 pointer-events-none":""," gap-4 mobile:gap-2"),children:[(0,n.jsx)(M,{title:"Base Token",tokenKey:"baseToken",onSelectToken:e=>{d.setState({baseToken:e}),(0,Z.aT)(e.mint,null==a?void 0:a.mint)&&d.setState({quoteToken:void 0})},token:t}),(0,n.jsx)(M,{title:"Quote Token",tokenKey:"quoteToken",onSelectToken:e=>{d.setState({quoteToken:e}),(0,Z.aT)(e.mint,null==t?void 0:t.mint)&&d.setState({baseToken:void 0})},token:a})]})}),(0,n.jsx)(z,{name:"Minimum order size",tooltip:"This is the smallest allowed order size. For a SOL/USDC market, this would be in units of SOL, a.k.a. the Lot size.",renderFormItem:(0,n.jsx)(v.Z,{disabled:!!o,className:"p-3 ".concat(o?"opacity-50 pointer-events-none":""," rounded-lg bg-[#141041]"),validators:{should:e=>(0,C.gt)(e,0)},value:(0,r.B)(i),onUserInput:e=>d.setState({minimumOrderSize:e})})}),(0,n.jsx)(z,{name:"Minimum price tick size",tooltip:"This is the smallest amount by which prices can move. For a SOL/USDC market, this would be in units of USDC, a.k.a. the price increment.",renderFormItem:(0,n.jsx)(v.Z,{disabled:!!o,className:"p-3 ".concat(o?"opacity-50 pointer-events-none":""," rounded-lg bg-[#141041]"),validators:{should:e=>(0,C.gt)(e,0)},value:(0,r.B)(l),onUserInput:e=>d.setState({tickSize:e})})}),o?(0,n.jsxs)(S.Z,{className:"w-min self-center gap-5 items-center",children:[(0,n.jsx)("div",{className:"text-xl mobile:text-base text-[#39d0d8] whitespace-nowrap",children:"Your new market id: "}),(0,n.jsx)(p.U,{textClassName:"text-lg text-[#fff]",showDigitCount:"all",canCopy:!0,children:o})]}):(0,n.jsx)(h.Z,{size:"lg",className:"w-full frosted-glass-teal mt-5",isLoading:c,validators:[{should:m,forceActive:!0,fallbackProps:{onClick:()=>s.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:t,fallbackProps:{children:"Select base token"}},{should:a,fallbackProps:{children:"Select base token"}},{should:(0,C.$u)(i)&&(0,C.gt)(i,0),fallbackProps:{children:"Should input valid minimum order size"}},{should:(0,C.$u)(l)&&(0,C.gt)(l,0),fallbackProps:{children:"Should input valid ticket size"}}],onClick:x,children:"Create Market"})]})}function z(e){let{name:t,tooltip:a,renderFormItem:i}=e;return(0,s.ZP)(e=>e.isMobile),(0,n.jsxs)(f.Z,{className:"grid-cols-[18em,1fr] mobile:grid-cols-1 gap-8 mobile:gap-4",children:[(0,n.jsxs)(S.Z,{className:"justify-self-end mobile:justify-self-start items-center",children:[(0,n.jsx)("div",{className:"text-lg mobile:text-sm text-[#abc4ff]",children:t}),a&&(0,n.jsxs)(j.Z,{panelClassName:"bg-[#3b4146]",arrowClassName:"bg-[#3b4146]",children:[(0,n.jsx)(g.Z,{size:"sm",heroIconName:"question-mark-circle",className:"mx-1 cursor-help text-[#abc4ff]"}),(0,n.jsx)(j.Z.Panel,{children:(0,n.jsx)("p",{className:"w-80",children:a})})]}),(0,n.jsx)("div",{className:"text-lg mobile:hidden text-[#abc4ff]",children:": "})]}),i]})}function M(e){var t;let{tokenKey:a,title:i,token:l,disableTokens:o,onSelectToken:r}=e,[c,m]=(0,I.useState)(!1),d=(0,s.ZP)(e=>e.isMobile);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.Z,{className:"grid items-center bg-[#141041] rounded-xl py-2 mobile:py-1.5 cursor-pointer px-3 mobile:px-2",onClick:()=>m(!0),children:l?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-xs mobile:text-2xs text-[#abc4ff80] mb-1",children:i}),(0,n.jsxs)(S.Z,{className:"items-center gap-2 mobile:gap-1",children:[(0,n.jsx)(k.Z,{token:l,size:d?"sm":"md"}),(0,n.jsx)("div",{className:"text-[#abc4ff] font-medium text-lg mobile:text-sm",children:null!==(t=l.symbol)&&void 0!==t?t:""}),(0,n.jsx)(g.Z,{size:d?"xs":"sm",className:"text-[#abc4ff] ml-auto mr-4",heroIconName:"chevron-down"})]})]}):(0,n.jsxs)(S.Z,{className:"text-[#abc4ff80] text-center gap-1.5 items-center px-3 py-2",children:[(0,n.jsx)("div",{className:"text-base mobile:text-xs",children:i}),(0,n.jsx)(g.Z,{size:d?"xs":"sm",className:"text-[#abc4ff80] ml-auto mr-4",heroIconName:"chevron-down"})]})}),(0,n.jsx)(w.Z,{open:c,onClose:()=>{m(!1)},disableTokens:o,onSelectToken:e=>{null==r||r(e,a)}})]})}}},function(e){e.O(0,[7239,9120,1671,7980,9774,2888,179],function(){return e(e.s=60506)}),_N_E=e.O()}]);