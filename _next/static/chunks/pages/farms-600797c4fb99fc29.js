(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7669],{49895:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/farms",function(){return s(17432)}])},77023:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(26416),i=s(8667),l=s(62707),a=s(34003),r=s(19036),o=s(53002),c=s(49641);async function d(e,t){return(0,i.ZP)(async s=>{let{transactionCollector:d,baseUtils:{owner:m,connection:u}}=s;(0,a.Z)(m,"require connected wallet");let x=c.Z.getState().jsonInfos.find(t=>{let{id:s}=t;return String(s)===String(e.id)});(0,a.Z)(x,"Farm pool not found");let f=(0,r.R)(x),{tokenAccountRawInfos:h,txVersion:p}=o.Z.getState(),{innerTransactions:g}=await n.l6j.makeDepositInstructionSimple({connection:u,poolKeys:f,fetchPoolInfo:e.fetchedMultiInfo,ownerInfo:{feePayer:m,wallet:m,tokenAccounts:h},lookupTableCache:i.eq,makeTxVersion:p,amount:t.amount.raw,checkCreateATAOwner:!0}),b=(0,l.AX)(()=>{c.Z.getState().refreshFarmInfos()},{once:!0});d.add(g,{onTxError:()=>(0,l.Ce)(b),onTxSentError:()=>(0,l.Ce)(b),txHistoryInfo:{title:"Add ".concat(t.amount.token.symbol),description:"Stake ".concat(t.amount.toExact()," ").concat(t.amount.token.symbol)}})})}},19390:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(26416),i=s(8667),l=s(62707),a=s(34003),r=s(71375),o=s(53002),c=s(49641);async function d(e,t){return(0,i.ZP)(async s=>{let{transactionCollector:d,baseUtils:{owner:m,connection:u}}=s;(0,a.Z)(m,"require connected wallet");let x=c.Z.getState().jsonInfos.find(t=>{let{id:s}=t;return String(s)===String(e.id)});(0,a.Z)(x,"Farm pool not found");let{tokenAccountRawInfos:f,txVersion:h}=o.Z.getState(),{innerTransactions:p}=await n.l6j.makeWithdrawInstructionSimple({connection:u,fetchPoolInfo:e.fetchedMultiInfo,ownerInfo:{feePayer:m,wallet:m,tokenAccounts:f},amount:(0,r.Z)(0),checkCreateATAOwner:!0,makeTxVersion:h,lookupTableCache:i.eq}),g=(0,l.AX)(()=>{c.Z.getState().refreshFarmInfos()},{once:!0});d.add(p,{onTxError:()=>(0,l.Ce)(g),onTxSentError:()=>(0,l.Ce)(g),onTxSuccess:()=>{setTimeout(()=>{c.Z.getState().refreshFarmInfos()},300)},txHistoryInfo:{title:"Harvest ".concat(t.rewardAmounts.map(e=>{let{token:t}=e;return t.symbol}).join(", ")),description:"Harvest ".concat(t.rewardAmounts.map(e=>"".concat(e.toExact()," ").concat(e.token.symbol)).join(", "))}})})}},1151:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var n=s(26416),i=s(82187),l=s(8667),a=s(62707),r=s(34003),o=s(53002),c=s(49641);async function d(e,t){return(0,l.ZP)(async s=>{let{transactionCollector:d,baseUtils:{owner:m,connection:u}}=s,x=(0,i.p)();(0,r.Z)(m,"require connected wallet");let f=c.Z.getState().jsonInfos.find(t=>{let{id:s}=t;return String(s)===String(e.id)});(0,r.Z)(f,"Farm pool not found");let{tokenAccountRawInfos:h,txVersion:p}=o.Z.getState(),g=await n.l6j.makeWithdrawInstructionSimple({connection:u,fetchPoolInfo:e.fetchedMultiInfo,ownerInfo:{feePayer:m,wallet:m,tokenAccounts:h},amount:t.amount.raw,checkCreateATAOwner:!0,makeTxVersion:p,lookupTableCache:l.eq});x.addInnerTransactions(...g.innerTransactions);let b=(0,a.AX)(()=>{c.Z.getState().refreshFarmInfos()},{once:!0});d.add(x.spawnTransactionQueue(),{onTxError:()=>(0,a.Ce)(b),onTxSentError:()=>(0,a.Ce)(b),txHistoryInfo:{title:"Unstake ".concat(t.amount.token.symbol),description:"Unstake ".concat(t.amount.toExact()," ").concat(t.amount.token.symbol)}})})}},82187:function(e,t,s){"use strict";s.d(t,{p:function(){return i}});var n=s(50705);let i=e=>{let t=null,s=[],i=[],l=[];function a(){let l=t||(null!=e?e:new n.YW);return(s.length||i.length)&&l.add(...s,...i.reverse()),l}return{setRawTransaction:function(e){t=e},addInstruction:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];s.push(...t)},addEndInstruction:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];i.push(...t)},addInnerTransactions:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];l.push(...t)},spawnTransaction:a,spawnTransactionQueue:function(){return s.length||i.length?[...l,a()]:l}}}},68186:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(85893),i=s(16938),l=s(54592),a=s(60421),r=s(51800);function o(e){let{is:t,ColProps:s,RowProps:o,GridProps:c,...d}=e;return"Row"===t?(0,n.jsx)(r.Z,{...d,...o}):"Col"===t?(0,n.jsx)(l.Z,{...d,...s}):"Grid"===t?(0,n.jsx)(a.Z,{...d,...c}):"div"===t?(0,n.jsx)("div",{...(0,i.CE)(d,["domRef"]),ref:d.domRef}):(0,n.jsx)(n.Fragment,{children:d.children})}},99645:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(85893);function i(e){let{className:t}=e;return(0,n.jsxs)("div",{className:"lds-roller ".concat(null!=t?t:""," mobile:scale-75"),children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]})}},28424:function(e,t,s){"use strict";s.d(t,{$:function(){return a}});var n=s(85893),i=s(40471),l=s(92618);function a(){return(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(i.Z,{src:"/coins/open-book-tip.png",fallbackSrc:"/coins/unknown.svg",width:80}),(0,n.jsx)(l.Z.Panel,{children:(0,n.jsxs)("div",{className:"max-w-[300px]",children:["This pool leverages liquidity to market make on the OpenBook central limit order book."," ",(0,n.jsx)("a",{href:"https://makidex.gitbook.io/makidex",style:{color:"#39D0D8"},children:"Learn more"})]})})]})}},41618:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(67294);function i(e,t){let s=(0,n.useRef)(!1),i=()=>s.current=!0;(0,n.useEffect)(()=>{if(!s.current)return e({runed:i})},t)}},17432:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ev}});var n=s(85893),i=s(67294),l=s(66180),a=s(69221),r=s(59277),o=s(91371),c=s(94678),d=s(96662),m=s(13521),u=s(52869),x=s(77023),f=s(19390),h=s(1151),p=s(53002),g=s(49641),b=s(91148),Z=s(52225),j=s(17097),v=s(47675),k=s(57435),w=s(94355),y=s(2148),N=s(31555),P=s(31166),S=s(80582),C=s(99522),T=s(68186),I=s(11601),F=s(43067),A=s(6994),E=s(70745),M=s(54531),L=s(97664),D=s(54592),R=s(23484),q=s(88132),z=s(60421),B=s(48162),O=s(82727),V=s(50321),U=s(99645),H=s(11583),W=s(28424),X=s(29120),_=s(36868),K=s(33674),$=s(6325),Q=s(51800),Y=s(95111),G=s(15144),J=s(29197),ee=s(92618),et=s(56419),es=s(90547),en=s(86597),ei=s(14033),el=s(99881),ea=s(3363),er=s(18074),eo=s(62952),ec=s(1758),ed=s(95865),em=s(4465),eu=s(81451),ex=s(51523),ef=s(72573),eh=s(58819),ep=s(73766),eg=s(41618),eb=s(98590),eZ=s(61652),ej=s(24608);function ev(){let e=(0,v.mu)();(0,Z.Z)(()=>{let e=function(){var e,t;let s=(0,v.mu)(),n=String(null!==(t=null!==(e=s.farmId)&&void 0!==e?e:s.farmid)&&void 0!==t?t:"")||void 0;return(0,j.gm)(n)?n:void 0}();e&&g.Z.setState(t=>({expandedItemIds:(0,b.jX)(t.expandedItemIds,e),searchText:e}))},{effectMethod:"isoLayoutEffect"}),function(){let e=(0,p.Z)(e=>e.owner);(0,i.useEffect)(()=>{e&&g.Z.setState({onlySelfCreatedFarms:!1})},[e])}();let t=(0,g.Z)(e=>e.currentTab);return(0,i.useEffect)(()=>{g.Z.setState({currentTab:e.tab})},[e]),(0,n.jsxs)(X.Z,{mobileBarTitle:{items:[{value:"MakiDEX",barLabel:"MakiDEX Farm"},{value:"Staked",barLabel:"Staked Farm"}],currentValue:t,onChange:e=>g.Z.setState({currentTab:e}),urlSearchQueryKey:"tab",drawerTitle:"FARMS"},contentButtonPaddingShorter:!0,metaTitle:"Farms - MakiDEX",children:[(0,n.jsx)(ek,{}),(0,n.jsx)(eA,{})]})}function ek(){let e=(0,o.ZP)(e=>e.isMobile);return e?null:(0,n.jsx)(D.Z,{children:(0,n.jsxs)(z.Z,{className:"grid-cols-3 justify-between items-center pb-8 pt-0",children:[(0,n.jsx)("div",{className:"text-2xl font-semibold justify-self-start text-white",children:"Farms"}),(0,n.jsx)(eC,{}),(0,n.jsx)(eS,{})]})})}function ew(e){let{className:t,dataSource:s}=e;return(0,g.Z)(e=>e.currentTab),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(_.Z,{placement:"bottom-right",children:[(0,n.jsx)(_.Z.Button,{children:(0,n.jsx)("div",{className:(0,l.m)("mx-1 rounded-full p-2 text-[#abc4ff] clickable justify-self-start",t),children:(0,n.jsx)(B.Z,{className:"w-4 h-4",iconClassName:"w-4 h-4",heroIconName:"dots-vertical"})})}),(0,n.jsx)(_.Z.Panel,{children:(0,n.jsx)("div",{children:(0,n.jsx)(A.Z,{className:"flex flex-col py-3 px-4  max-h-[80vh] border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card",size:"lg",children:(0,n.jsxs)(z.Z,{className:"grid-cols-1 items-center gap-2",children:[(0,n.jsx)(eN,{}),(0,n.jsx)(eF,{}),(0,n.jsx)(eT,{}),(0,n.jsx)(eS,{})]})})})})]})})}function ey(e){let{className:t}=e,s=(0,o.ZP)(e=>e.isMobile),a=(0,g.Z)(e=>e.searchText),r=(0,i.useRef)(null),[c,d]=(0,i.useState)(!1),m=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{m.current||setTimeout(()=>{if(m.current=!0,a){var e;d(!0),null===(e=r.current)||void 0===e||e.open()}},600)},[a]),(0,n.jsx)(O.Z,{value:a,className:(0,l.m)("px-2 py-2 mobile:py-1 gap-2 ring-inset ring-1 ring-[rgba(196,214,255,0.5)] rounded-xl mobile:rounded-lg pc:w-[12vw] mobile:w-auto",t),inputClassName:"font-medium text-sm mobile:text-xs text-[rgba(196,214,255,0.5)] placeholder-[rgba(196,214,255,0.5)]",prefix:(0,n.jsx)(B.Z,{heroIconName:"search",size:s?"sm":"smi",className:"text-[rgba(196,214,255,0.5)]"}),suffix:(0,n.jsxs)(ee.Z,{disable:!c,componentRef:r,children:[(0,n.jsx)(B.Z,{heroIconName:"x",size:s?"xs":"sm",className:"text-[rgba(196,214,255,0.5)] transition clickable ".concat(a?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>{g.Z.setState({searchText:""})}}),(0,n.jsx)(ee.Z.Panel,{children:"Click here to view all farm pools"})]}),placeholder:"Search All",onUserInput:e=>{g.Z.setState({searchText:e})}})}function eN(e){let{className:t}=e,s=(0,g.Z)(e=>e.onlySelfFarms),i=(0,p.Z)(e=>e.connected),l=(0,g.Z)(e=>e.currentTab);return i&&"Staked"!==l?(0,n.jsxs)(Q.Z,{className:"justify-self-end  mobile:justify-self-auto items-center",children:[(0,n.jsx)("span",{className:"text-[rgba(196,214,255,0.5)] whitespace-nowrap font-medium text-sm mobile:text-xs",children:"Show Staked"}),(0,n.jsx)(G.Z,{className:"ml-2 ",defaultChecked:s,onToggle:e=>g.Z.setState({onlySelfFarms:e})})]}):null}function eP(e){let{className:t}=e,s=(0,g.Z)(e=>e.onlySelfCreatedFarms);return(0,n.jsxs)(Q.Z,{className:"justify-self-end  mobile:justify-self-auto items-center",children:[(0,n.jsx)("span",{className:"text-[rgba(196,214,255,0.5)] whitespace-nowrap font-medium text-sm mobile:text-xs",children:"Show Created"}),(0,n.jsx)(G.Z,{className:"ml-2 ",checked:s,onToggle:e=>g.Z.setState({onlySelfCreatedFarms:e})})]})}function eS(e){let{className:t}=e;return(0,n.jsxs)(Q.Z,{className:(0,l.m)("justify-self-end mobile:justify-self-auto gap-1 py-1 flex-wrap items-center opacity-100 pointer-events-auto clickable transition",t),onClick:()=>{(0,N.Eh)("/farms/create")},children:[(0,n.jsx)(B.Z,{heroIconName:"plus-circle",className:"text-[#abc4ff] mobile:text-[#abc4ff80]",size:"sm"}),(0,n.jsx)("span",{className:"text-[#abc4ff] mobile:text-[#abc4ff80] font-medium text-sm mobile:text-xs",children:"Create Farm"})]})}function eC(e){let{className:t}=e,s=(0,g.Z)(e=>e.currentTab),i=(0,o.ZP)(e=>e.isMobile);return i?(0,n.jsx)(J.Z,{currentValue:s,urlSearchQueryKey:"tab",values:(0,b.DB)(["MakiDEX","Staked"]),onChange:e=>g.Z.setState({currentTab:e}),className:t}):(0,n.jsx)(J.Z,{currentValue:s,urlSearchQueryKey:"tab",values:(0,b.DB)(["MakiDEX","Staked"]),onChange:e=>g.Z.setState({currentTab:e}),className:(0,l.m)("justify-self-center mobile:col-span-full",t)})}function eT(e){let{className:t}=e,s=(0,g.Z)(e=>e.timeBasis);return(0,n.jsx)(Y.Z,{className:(0,l.m)("z-20",t),candidateValues:["24H","7D","30D"],localStorageKey:"ui-time-basis",defaultValue:s,prefix:"Time Basis:",onChange:e=>{g.Z.setState({timeBasis:null!=e?e:s})}})}function eI(e){let{className:t,onChange:s}=e,i=(0,g.Z)(e=>e.timeBasis);return(0,n.jsx)(Y.Z,{className:t,candidateValues:[{label:"Farm",value:"name"},{label:"APRS ".concat(i),value:"24H"===i?"totalApr24h":"7D"===i?"totalApr7d":"totalApr30d"},{label:"TVL",value:"tvl"},{label:"Favorite",value:"favorite"}],prefix:"Sort by:",onChange:s})}function eF(e){let{className:t}=e,s=(0,g.Z)(e=>e.refreshFarmInfos),i=(0,o.ZP)(e=>e.isMobile);return i?(0,n.jsxs)(Q.Z,{className:(0,l.m)("items-center",t),children:[(0,n.jsx)("span",{className:"text-[rgba(196,214,255,0.5)] font-medium text-sm mobile:text-xs",children:"Refresh farms"}),(0,n.jsx)(K.Z,{refreshKey:"farms",className:"justify-self-end",freshFunction:()=>{s()}})]}):(0,n.jsx)("div",{className:(0,l.m)("justify-self-end",t),children:(0,n.jsx)(K.Z,{refreshKey:"farms",className:"justify-self-end",freshFunction:()=>{s()}})})}function eA(){let e=(0,g.Z)(e=>e.jsonInfos),t=(0,g.Z)(e=>e.hydratedInfos),s=(0,g.Z)(e=>e.currentTab),l=(0,g.Z)(e=>e.onlySelfFarms),a=(0,g.Z)(e=>e.tokenType),r=(0,g.Z)(e=>e.onlySelfCreatedFarms),c=(0,g.Z)(e=>e.searchText),d=(0,ej.nj)(c,{debouncedOptions:{delay:100}}),[m]=(0,g.W)(),x=(0,o.ZP)(e=>e.isMobile),f=(0,p.Z)(e=>e.owner),h=(0,g.Z)(e=>e.isLoading),b=(0,g.Z)(e=>e.timeBasis),Z=(t.length?t:e).filter(e=>!(0,em.aT)(e.lpMint,S.PD)),j=(0,i.useMemo)(()=>Z.filter(e=>{var t;return"Fusion"===s?"fusion"===e.category&&(!(0,u.lr)(e)||!e.isClosedPool):"Staked"===s?!!(0,u.lr)(e)&&(0,eu.$u)(null===(t=e.ledger)||void 0===t?void 0:t.deposited):"Ecosystem"===s?"ecosystem"===e.category:"raydium"===e.category&&(!(0,u.lr)(e)||!e.isClosedPool)}),[s,Z]);j.some(e=>(0,em.aT)(e.creator,f));let v=(0,i.useMemo)(()=>j.filter(e=>{var t;return!(0,u.lr)(e)||!e.isClosedPool||(0,em.aT)(e.creator,f)||(0,eu.$u)(null===(t=e.ledger)||void 0===t?void 0:t.deposited)}).filter(e=>!(l&&(0,u.lr)(e))||e.ledger&&(0,eu.$u)(e.ledger.deposited)).filter(e=>!r||!f||(0,em.aT)(e.creator,f)&&6===e.version).filter(e=>!(6===e.version&&(0,u.lr)(e))||("Option tokens"===a?e.rewards.some(e=>e.isOptionToken):"Standard SPL"!==a||!e.rewards.some(e=>e.isOptionToken))),[l,r,j,f]),k=(0,P.ZP)(e=>e.isTokenUnnamedAndNotUserCustomized),w=(0,i.useDeferredValue)((0,i.useMemo)(()=>(0,eh.K)(v,{text:d,matchConfigs:e=>{var t,s;return(0,u.lr)(e)?[{text:(0,ea.ZP)(e.id),entirely:!0},{text:e.ammId,entirely:!0},{text:(0,ea.ZP)(null===(t=e.base)||void 0===t?void 0:t.mint),entirely:!0},{text:(0,ea.ZP)(null===(s=e.quote)||void 0===s?void 0:s.mint),entirely:!0},e.base&&!k(e.base.mint)?e.base.symbol:void 0,e.quote&&!k(e.quote.mint)?e.quote.symbol:void 0,{text:(0,ea.ZP)(e.lpMint),entirely:!0}]:[{text:(0,ea.ZP)(e.id),entirely:!0},{text:(0,ea.ZP)(e.lpMint),entirely:!0}]}}),[v,d])),{sortedData:y,setConfig:N,sortConfig:C,clearSortConfig:T}=(0,eb.Z)(w,{backgroundSortConfig:{key:"defaultKey",sortCompare:[e=>null==m?void 0:m.includes((0,ea.ZP)(e.id))]}});(0,eg.Z)(e=>{let{runed:t}=e;void 0!==m&&t(),null!=m&&N({key:"init",sortCompare:[e=>null==m?void 0:m.includes((0,ea.ZP)(e.id))],mode:"decrease"})},[m]),(0,i.useEffect)(()=>{N({key:"init by currentTab",sortCompare:[e=>null==m?void 0:m.includes((0,ea.ZP)(e.id))],mode:"decrease"})},[s]);let I="Ecosystem"===s?{title:"Ecosystem Farms",description:"Stake and earn Solana Ecosystem token rewards",tooltip:"Ecosystem Farms allow any project or user to create a farm in a decentralized manner to incentivize liquidity providers. Rewards are locked for the duration on the farm. However, creator liquidity is not locked."}:"Fusion"===s?{title:"Fusion Farms",description:"Stake LP tokens and earn project token rewards"}:"Staked"===s?{title:"Your Staked Farms",description:"You are currently staked in these farms"}:{title:"MakiDEX Farms",description:"Stake LP tokens and earn token rewards"},F=x?(0,n.jsx)("div",{children:(0,n.jsxs)(Q.Z,{className:"mb-4",children:[(0,n.jsxs)(z.Z,{className:"grow gap-2 grid-cols-auto-fit",children:[(0,n.jsx)(ey,{}),(0,n.jsx)(eI,{onChange:e=>{e?N({key:e,sortCompare:"favorite"===e?e=>null==m?void 0:m.includes((0,ea.ZP)(e.id)):t=>t[e]}):T()}})]}),(0,n.jsx)(ew,{className:"self-center",dataSource:Z})]})}):(0,n.jsxs)(Q.Z,{className:"justify-between gap-16 gap-y-4 items-center mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(Q.Z,{className:"items-center",children:[(0,n.jsx)("div",{className:"font-medium text-white text-lg",children:I.title}),I.tooltip&&(0,n.jsxs)(ee.Z,{children:[(0,n.jsx)(B.Z,{className:"ml-1 cursor-help",size:"sm",heroIconName:"question-mark-circle"}),(0,n.jsx)(ee.Z.Panel,{className:"max-w-[300px]",children:I.tooltip})]})]}),(0,n.jsx)("div",{className:"font-medium text-[rgba(196,214,255,.5)] text-base ",children:I.description})]}),(0,n.jsxs)(Q.Z,{className:"grow flex-wrap justify-end items-stretch gap-6",children:[f&&("Ecosystem"===s||"Staked"===s)?(0,n.jsx)(eP,{}):null,(0,n.jsx)(eT,{}),(0,n.jsx)(ey,{})]})]});return(0,n.jsxs)(q.Z,{haveMinHeight:!0,wrapperClassName:"flex-1 overflow-hidden flex flex-col",className:"grow p-10 pt-6 pb-4 mobile:px-3 mobile:py-3 w-full flex flex-col h-full",children:[F,!x&&(0,n.jsxs)(Q.Z,{type:"grid-x",className:"mb-3 h-12  sticky -top-6 backdrop-filter z-10 backdrop-blur-md bg-[rgba(20,16,65,0.2)] mr-scrollbar rounded-xl mobile:rounded-lg gap-2 grid-cols-[auto,1.5fr,1.2fr,1fr,1fr,auto]",children:[(0,n.jsx)(Q.Z,{className:"w-20 pl-9"}),(0,n.jsxs)(Q.Z,{className:"font-medium text-[#ABC4FF] text-sm items-center cursor-pointer clickable clickable-filter-effect no-clicable-transform-effect",onClick:()=>{N({key:"name",sortModeQueue:["increase","decrease","none"],sortCompare:e=>(0,u.lr)(e)?e.symbol:void 0})},children:[(0,n.jsx)("div",{className:"mr-16"}),"Farm",(0,n.jsx)(B.Z,{className:"ml-1",size:"sm",iconSrc:(null==C?void 0:C.key)==="name"&&"none"!==C.mode?(null==C?void 0:C.mode)==="decrease"?"/icons/msic-sort-down.svg":"/icons/msic-sort-up.svg":"/icons/msic-sort.svg"})]}),(0,n.jsx)("div",{className:" font-medium self-center text-[#ABC4FF] text-sm",children:"Pending Reward"}),(0,n.jsxs)(Q.Z,{className:" font-medium items-center text-[#ABC4FF] text-sm cursor-pointer gap-1  clickable clickable-filter-effect no-clicable-transform-effect",onClick:()=>{let e="24H"===b?"totalApr24h":"7D"===b?"totalApr7d":"totalApr30d";N({key:e,sortCompare:t=>(0,u.lr)(t)?t[e]:void 0})},children:["Total APR ",b,(0,n.jsxs)(ee.Z,{children:[(0,n.jsx)(B.Z,{className:"ml-1 cursor-help",size:"sm",heroIconName:"question-mark-circle"}),(0,n.jsxs)(ee.Z.Panel,{children:["Estimated APR based on trading fees earned by the pool in the past ",b]})]}),(0,n.jsx)(B.Z,{className:"ml-1",size:"sm",iconSrc:(null==C?void 0:C.key.startsWith("totalApr"))&&"none"!==C.mode?(null==C?void 0:C.mode)==="decrease"?"/icons/msic-sort-down.svg":"/icons/msic-sort-up.svg":"/icons/msic-sort.svg"})]}),(0,n.jsxs)(Q.Z,{className:" font-medium text-[#ABC4FF] text-sm items-center cursor-pointer  clickable clickable-filter-effect no-clicable-transform-effect",onClick:()=>N({key:"tvl",sortCompare:e=>(0,u.lr)(e)?e.tvl:void 0}),children:["TVL",(0,n.jsx)(B.Z,{className:"ml-1",size:"sm",iconSrc:(null==C?void 0:C.key)==="tvl"&&"none"!==C.mode?(null==C?void 0:C.mode)==="decrease"?"/icons/msic-sort-down.svg":"/icons/msic-sort-up.svg":"/icons/msic-sort.svg"})]}),(0,n.jsx)(eF,{className:"pr-8 self-center"})]}),(0,n.jsx)(eE,{isLoading:h,infos:y})]})}function eE(e){let{isLoading:t,infos:s}=e,i=(0,g.Z)(e=>e.expandedItemIds),l=(0,c.ZP)(e=>e.isMigrateToClmmDialogOpen),[a,r]=(0,g.W)(),o=(0,g.Z)(e=>e.currentDialogInfo);return(0,n.jsxs)(n.Fragment,{children:[s.length?(0,n.jsx)(V.Z,{className:"gap-3 text-[#ABC4FF] flex-1 -mx-2 px-2",children:s.map(e=>(0,n.jsx)(V.Z.Item,{children:(0,n.jsxs)(R.Z,{open:i.has((0,ea.ZP)(e.id)),onToggle:()=>{g.Z.setState(t=>({expandedItemIds:(0,ep.hU)(t.expandedItemIds,(0,ea.ZP)(e.id))}))},children:[(0,n.jsx)(R.Z.Face,{children:t=>{let{isOpen:s}=t;return(0,n.jsx)(eL,{open:s,info:e,isFavourite:null==a?void 0:a.includes((0,ea.ZP)(e.id)),onUnFavorite:e=>{r(t=>(0,b.cl)(null!=t?t:[],e))},onStartFavorite:e=>{r(t=>(0,b.jX)(null!=t?t:[],e))}})}}),(0,n.jsx)(R.Z.Body,{children:t?null:(0,n.jsx)(eD,{farmInfo:e})})]})},(0,ea.ZP)(e.id)))}):(0,n.jsx)(Q.Z,{className:"text-center justify-center text-2xl p-12 opacity-50 text-[rgb(171,196,255)]",children:t?(0,n.jsx)(U.Z,{}):"(No results found)"}),(0,n.jsx)(eR,{}),o&&(0,n.jsx)(eZ.Z,{info:o,open:l,onClose:()=>c.ZP.setState({isMigrateToClmmDialogOpen:!1})})]})}function eM(e){var t,s,i,l,a,r,c,d;let{farmInfo:m,reward:u}=e,x=(0,o.ZP)(e=>e.isMobile),f=(0,P.ZP)(e=>e.tokenListSettings),h=f["UnNamed Token List"].mints;if(!u)return null;let p=!!(0,j.Vr)(u)||u.isRewarding,g=!(0,j.Vr)(u)&&u.isRewardEnded,b=!(0,j.Vr)(u)&&u.isRewardBeforeStart,Z=(0,j.Vr)(u)?u:u.userPendingReward,v=(0,P.ZP)(e=>e.tokenPrices);return(0,n.jsxs)(ee.Z,{placement:"bottom",children:[(0,n.jsxs)(Q.Z,{className:"ring-1 ring-inset ".concat((0,j.Vr)(u)?"ring-[#abc4ff80]":u.isOptionToken?"ring-[#DA2EEF]":"ring-[#abc4ff80]"," p-1 rounded-full items-center gap-2 overflow-hidden ").concat(p?"":g?"opacity-30 contrast-40":"opacity-50"," ").concat(""),children:[(0,eu.gt)(Z,.001)&&(0,n.jsx)("div",{className:"text-xs translate-y-0.125 pl-1",children:(0,el.Z)((0,ef.B)(Z),{fractionLength:3})}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(E.Z,{size:"smi",token:u.token,className:b?"blur-sm":""}),g&&(0,n.jsx)("div",{className:"absolute h-[1.5px] w-full top-1/2 -translate-y-1/2 rotate-45 bg-[#abc4ff80] scale-x-125"}),b&&(0,n.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 opacity-70",children:(0,n.jsx)(B.Z,{heroIconName:"dots-horizontal"})})]})]}),(0,n.jsxs)(ee.Z.Panel,{children:[(0,n.jsxs)(Q.Z,{className:"text-sm justify-between items-center min-w-[260px] gap-4 mb-1",children:[(0,n.jsxs)(Q.Z,{className:"gap-1.5 items-center",children:[(0,n.jsx)(E.Z,{size:x?"xs":"smi",token:u.token}),g||(0,j.Vr)(u)?(0,n.jsx)("span",{className:"text-[#ABC4FF]",children:null!==(r=null===(t=u.token)||void 0===t?void 0:t.symbol)&&void 0!==r?r:"--"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-white",children:(0,el.Z)((0,ef.B)(u.perWeek))}),(0,n.jsxs)("span",{className:"text-[#ABC4FF]",children:[null!==(c=null===(s=u.token)||void 0===s?void 0:s.symbol)&&void 0!==c?c:"--"," per week"]})]})]}),g||(0,j.Vr)(u)?null:(0,n.jsx)("span",{className:"text-white/50",children:(0,ed.Z)((0,ec.Z)(u.perWeek,null!==(d=v[(0,ea.ZP)(null===(i=u.token)||void 0===i?void 0:i.mint)])&&void 0!==d?d:null),{decimalPlace:0})})]}),(0,n.jsx)("div",{className:"mb-1",children:!(0,j.Vr)(u)&&u.openTime&&u.endTime&&(g?"Reward Ended":b?"Reward Not Started":"Reward Period")}),u.openTime&&b&&(0,n.jsxs)("div",{className:"opacity-50",children:["Start in ",(0,es.dS)(u.openTime)]}),!(0,j.Vr)(u)&&u.openTime&&u.endTime&&(0,n.jsxs)("div",{className:"opacity-50",children:[(0,et.xn)(u.openTime,{hideHourMinuteSecond:!0})," ~"," ",(0,et.xn)(u.endTime,{hideHourMinuteSecond:!0})]}),(null===(l=u.token)||void 0===l?void 0:l.mint)&&(0,n.jsx)(C.U,{showDigitCount:6,addressType:"token",canCopy:!0,canExternalLink:!0,textClassName:"text-xs",className:"w-full opacity-50 mt-2 contrast-75",children:(0,ea.ZP)(u.token.mint)}),(null==h?void 0:h.has((0,ea.ZP)(null===(a=u.token)||void 0===a?void 0:a.mint)))&&(0,n.jsx)("div",{className:"max-w-[220px] mt-2",children:"This token does not currently have a ticker symbol. Check to ensure it is the token you want to interact with."})]})]})}function eL(e){let{open:t,className:s,info:a,isFavourite:r,onUnFavorite:c,onStartFavorite:m}=e,x=(0,g.Z)(e=>e.jsonFarmAprInfos),f=x.find(e=>e.id===(0,ea.ZP)(a.id)),h=(0,o.ZP)(e=>e.isMobile),p=(0,g.Z)(e=>e.timeBasis),b=!(0,u.aE)(a)&&a.rewards.some(e=>e.isOptionToken),Z=(0,u.aE)(a)?void 0:a["24H"===p?"totalApr24h":"30D"===p?"totalApr30d":"totalApr7d"],j=(0,u.aE)(a)?void 0:a["24H"===p?"raydiumFeeApr24h":"30D"===p?"raydiumFeeApr30d":"raydiumFeeApr7d"],v=(0,d.ZP)(e=>e.chainTimeOffset),k=e=>{var t,s;let n=Date.now()+(null!=v?v:0);return(null!==(t=e.endTime)&&void 0!==t?t:new Date).getTime()<n?1:(null!==(s=e.openTime)&&void 0!==s?s:new Date).getTime()>n?-1:0},w=(0,n.jsxs)(Q.Z,{type:"grid-x",className:(0,l.m)("py-5 mobile:py-4 mobile:px-5 ".concat(a.local?"border-2 border-[#DA2EEF]":""," bg-[#141041] items-stretch gap-2 grid-cols-[auto,1.5fr,1.2fr,1fr,1fr,auto] mobile:grid-cols-[1fr,1fr,1fr,auto] rounded-t-3xl mobile:rounded-t-lg ").concat(t?"":"rounded-b-3xl mobile:rounded-b-lg"," transition-all"),s),children:[(0,n.jsx)("div",{className:"w-12 self-center ml-6 mr-2",children:r?(0,n.jsx)(B.Z,{iconSrc:"/icons/misc-star-filled.svg",onClick:e=>{let{ev:t}=e;t.stopPropagation(),null==c||c((0,ea.ZP)(a.id))},className:"clickable clickable-mask-offset-2 m-auto self-center"}):(0,n.jsx)(B.Z,{iconSrc:"/icons/misc-star-empty.svg",onClick:e=>{let{ev:t}=e;t.stopPropagation(),null==m||m((0,ea.ZP)(a.id))},className:"clickable clickable-mask-offset-2 opacity-30 hover:opacity-80 transition m-auto self-center"})}),(0,n.jsx)(eq,{info:a,className:"self-center"}),6===a.version?(0,n.jsx)(eB,{name:"Pending Rewards",loading:(0,u.aE)(a)||!a.rewards,value:(0,n.jsx)(Q.Z,{className:"flex-wrap items-center gap-2 w-full pr-8",children:(0,u.aE)(a)?"--":(0,n.jsxs)(n.Fragment,{children:[[...a.rewards].sort((e,t)=>k(e)-k(t)).map(e=>(0,n.jsx)(i.Fragment,{children:(0,n.jsx)(eM,{farmInfo:a,reward:e})},(0,ea.ZP)(e.rewardVault))),b&&(0,n.jsxs)(ee.Z,{children:[(0,n.jsx)(I.C,{cssColor:"#DA2EEF",children:"Option tokens"}),(0,n.jsx)(ee.Z.Panel,{children:"Reward token is an option, check token metadata and with token project on how to redeem. APR may be inaccurate."})]})]})})}):(0,n.jsx)(eB,{name:"Pending Rewards",loading:(0,u.aE)(a)||!a.rewards,value:(0,n.jsx)(Q.Z,{className:"flex-wrap gap-2 w-full pr-8",children:(0,u.aE)(a)?"--":a.rewards.map(e=>{let{token:t,userPendingReward:s,userHavedReward:i}=e;return i&&t&&(0,n.jsx)("div",{children:(0,n.jsx)(eM,{farmInfo:a,reward:null!=s?s:(0,eo.n)(t,0)})},null==t?void 0:t.mintString)})})}),(0,n.jsx)(eB,{name:"Total APR ".concat(p),className:"w-max",loading:(0,u.aE)(a)||!Z,value:(0,u.aE)(a)?"--":(0,n.jsxs)(Q.Z,{className:"items-center",children:[(0,n.jsxs)(ee.Z,{placement:"right",children:[Z?(0,er.Z)(Z):"--",(0,n.jsxs)(ee.Z.Panel,{children:[j&&(0,n.jsxs)("div",{className:"whitespace-nowrap",children:["Fees ",(0,er.Z)(j)]}),a.rewards.map((e,t)=>{let{apr:s,token:i,userHavedReward:l}=e;return l&&(0,n.jsxs)("div",{className:"whitespace-nowrap",children:[null==i?void 0:i.symbol," ",(0,er.Z)(s)]},t)})]})]}),b&&(0,n.jsxs)(ee.Z,{placement:"right",children:[(0,n.jsx)(B.Z,{className:"ml-1 cursor-help",size:"sm",heroIconName:"question-mark-circle"}),(0,n.jsx)(ee.Z.Panel,{children:(0,n.jsx)("div",{className:"max-w-[300px]",children:"Options APR is an estimate and varies based on token market price and expected strike price."})})]})]})}),(0,n.jsx)(eB,{name:"TVL",value:(0,u.lr)(a)&&a.tvl?"~".concat((0,ed.Z)(a.tvl,{decimalPlace:0})):f?"~".concat((0,ed.Z)(f.tvl,{decimalPlace:0})):"--",subValue:(0,u.lr)(a)&&a.stakedLpAmount?"".concat((0,el.Z)((0,ef.B)(a.stakedLpAmount,{decimalLength:0}))," LP"):f?"".concat((0,el.Z)((0,ex.hi)(f.tvl,f.lpPrice),{fractionLength:0})," LP"):"--"}),(0,n.jsx)(z.Z,{className:"w-9 h-9 mr-8 place-items-center self-center",children:(0,n.jsx)(B.Z,{size:"sm",className:"justify-self-end mr-1.5",heroIconName:"".concat(t?"chevron-up":"chevron-down")})})]}),y=(0,n.jsxs)(R.Z,{open:t,children:[(0,n.jsx)(R.Z.Face,{children:(0,n.jsxs)(Q.Z,{type:"grid-x",className:"py-4 px-5 mobile:p-2 items-stretch gap-2 grid-cols-[auto,1.1fr,1fr,1fr,auto] bg-[#141041] mobile:rounded-t-lg ".concat(t?"":"rounded-b-3xl mobile:rounded-b-lg"),children:[(0,n.jsx)("div",{className:"w-8 self-center ",children:r?(0,n.jsx)(B.Z,{className:"clickable m-auto self-center",iconSrc:"/icons/misc-star-filled.svg",onClick:e=>{let{ev:t}=e;t.stopPropagation(),null==c||c((0,ea.ZP)(a.id))},size:"sm"}):(0,n.jsx)(B.Z,{className:"clickable opacity-30 hover:opacity-80 transition clickable-mask-offset-2 m-auto self-center",iconSrc:"/icons/misc-star-empty.svg",onClick:e=>{let{ev:t}=e;t.stopPropagation(),null==m||m((0,ea.ZP)(a.id))},size:"sm"})}),(0,n.jsx)(eq,{info:a,className:"self-center"}),(0,n.jsx)(eB,{name:"TVL",value:(0,u.aE)(a)?"--":a.tvl?"≈".concat((0,ed.Z)(a.tvl,{autoSuffix:!0,decimalPlace:1})):"--",subValue:(0,u.aE)(a)?"--":a.stakedLpAmount&&"".concat((0,ei.S)(a.stakedLpAmount,{decimalPlace:1})," LP")}),(0,n.jsx)(eB,{name:"APR(".concat(p,")"),value:(0,u.aE)(a)?"--":(0,n.jsxs)(ee.Z,{placement:"right",children:[a.totalApr7d?(0,er.Z)(a.totalApr7d):"--",(0,n.jsxs)(ee.Z.Panel,{children:[a.raydiumFeeApr7d&&(0,n.jsxs)("div",{className:"whitespace-nowrap",children:["Fees ",(0,er.Z)(a.raydiumFeeApr7d)]}),a.rewards.map((e,t)=>{let{apr:s,token:i,userHavedReward:l}=e;return l&&(0,n.jsxs)("div",{className:"whitespace-nowrap",children:[null==i?void 0:i.symbol," ",(0,er.Z)(s)]},t)})]})]})}),(0,n.jsx)(z.Z,{className:"w-6 h-6 place-items-center self-center",children:(0,n.jsx)(B.Z,{size:"sm",heroIconName:"".concat(t?"chevron-up":"chevron-down")})})]})}),(0,n.jsx)(R.Z.Body,{})]});return h?y:w}function eD(e){var t;let{farmInfo:s}=e,i=(0,y.O)(e=>e.lpPrices),l=(0,P.ZP)(e=>e.tokenPrices),r=(0,o.ZP)(e=>e.isMobile),d=(0,p.Z)(e=>e.connected),x=(0,p.Z)(e=>e.connecting),h=(0,p.Z)(e=>e.owner),Z=(0,p.Z)(e=>e.balances),j=(0,eu.$u)(Z[(0,ea.ZP)(s.lpMint)]),v=(0,u.lr)(s)&&s.rewards.some(e=>{let{userPendingReward:t}=e;return(0,eu.$u)(t)}),k=(0,w.Z)(e=>e.logSuccess),S=(0,o.ZP)(e=>e.isApprovePanelShown),C=(0,a.p)(e=>e.jsonInfos),I=null==C?void 0:C.some(e=>e.lpMint===(0,ea.ZP)(s.lpMint));return(0,u.aE)(s)?null:(0,n.jsxs)("div",{className:"rounded-b-3xl mobile:rounded-b-lg overflow-hidden",style:{background:"linear-gradient(126.6deg, rgba(171, 196, 255, 0.12), rgb(171 196 255 / 4%) 100%)"},children:[(0,n.jsxs)(T.Z,{is:r?"Col":"Row",className:"mobile:gap-3",children:[(0,n.jsxs)(T.Z,{is:r?"Col":"Grid",className:"grid-cols-[1fr,1.5fr] gap-8 mobile:gap-3 flex-grow px-8 py-5 mobile:px-4 mobile:py-3",children:[(0,n.jsxs)(Q.Z,{className:"p-6 mobile:py-3 mobile:px-4 flex-grow ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-3xl mobile:rounded-xl items-center gap-3",children:[(0,n.jsxs)("div",{className:"flex-grow",children:[(0,n.jsx)("div",{className:"text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-2xs mb-1",children:"Deposited"}),(0,n.jsx)("div",{className:"text-white font-medium text-base mobile:text-xs",children:i[String(s.lpMint)]&&s.userStakedLpAmount?(0,ed.Z)((0,ec.Z)(s.userStakedLpAmount,i[String(s.lpMint)])):"--"}),s.userStakedLpAmount&&(0,n.jsxs)("div",{className:"text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-xs",children:[(0,el.Z)((0,ef.B)(s.userStakedLpAmount),{fractionLength:null===(t=s.userStakedLpAmount)||void 0===t?void 0:t.token.decimals})," ","LP"]})]}),(0,n.jsx)(Q.Z,{className:"gap-3",children:s.userHasStaked?(0,n.jsxs)(n.Fragment,{children:[I?(0,n.jsx)(F.Z,{className:"text-base mobile:text-sm font-medium frosted-glass frosted-glass-teal rounded-xl flex-grow",onClick:()=>{c.ZP.setState({isMigrateToClmmDialogOpen:!0}),g.Z.setState({currentDialogInfo:s})},children:"Migrate"}):(0,n.jsx)(F.Z,{className:"frosted-glass-teal mobile:px-6 mobile:py-2 mobile:text-xs",disabled:s.isClosedPool&&!s.isUpcomingPool||!j,validators:[{should:!s.isClosedPool},{should:d,forceActive:!0,fallbackProps:{children:x?"Connecting":"Connect Wallet",onClick:x?void 0:()=>o.ZP.setState({isWalletSelectorShown:!0})}},{should:j,forceActive:!0,fallbackProps:{children:"Add Liquidity",onClick:()=>(0,N.Eh)("/liquidity/add",{queryProps:{ammId:s.ammId}})}}],onClick:()=>{d?g.Z.setState({isStakeDialogOpen:!0,stakeDialogMode:"deposit",currentDialogInfo:s}):o.ZP.setState({isWalletSelectorShown:!0})},children:"Stake"}),(0,n.jsxs)(ee.Z,{children:[(0,n.jsx)(B.Z,{size:r?"sm":"smi",heroIconName:"minus",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] clickable clickable-filter-effect",onClick:()=>{d?g.Z.setState({isStakeDialogOpen:!0,stakeDialogMode:"withdraw",currentDialogInfo:s}):o.ZP.setState({isWalletSelectorShown:!0})}}),(0,n.jsx)(ee.Z.Panel,{children:"Unstake LP"})]})]}):(0,n.jsx)(F.Z,{className:"frosted-glass-teal mobile:py-2 mobile:text-xs",validators:[{should:!s.isClosedPool},{should:d,forceActive:!0,fallbackProps:{children:x?"Connecting":"Connect Wallet",onClick:x?void 0:()=>o.ZP.setState({isWalletSelectorShown:!0})}},{should:j,forceActive:!0,fallbackProps:{children:"Add Liquidity",onClick:()=>(0,N.Eh)("/liquidity/add",{queryProps:{ammId:s.ammId}})}}],onClick:()=>{g.Z.setState({isStakeDialogOpen:!0,stakeDialogMode:"deposit",currentDialogInfo:s})},children:"Start Farming"})})]}),(0,n.jsxs)(T.Z,{is:r?"Col":"Row",className:"p-6 mobile:py-3 mobile:px-4 flex-grow ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-3xl mobile:rounded-xl items-center gap-3",children:[(0,n.jsxs)("div",{className:"flex-grow w-full",children:[(0,n.jsx)("div",{className:"text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-2xs ".concat(s.rewards.length>2?"mb-5":"mb-1"),children:"Pending rewards"}),(0,n.jsx)(z.Z,{className:"gap-board\n                   ".concat(s.rewards.filter(e=>6===e.version||e.userHavedReward).length>1?"grid-cols-2":"grid-cols-1"),style:{clipPath:"inset(17px)",margin:"-17px"},children:(0,b.Do)(s.rewards.map((e,t)=>{var i,a,r;return 6===s.version||e.userHavedReward?(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)("div",{className:"text-white font-medium text-base mobile:text-xs",children:[e.userPendingReward?(0,ef.B)(e.userPendingReward):0," ",null===(i=e.token)||void 0===i?void 0:i.symbol]}),(0,n.jsx)("div",{className:"text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-xs",children:(null==l?void 0:l[String(null===(a=e.token)||void 0===a?void 0:a.mint)])&&(null==e?void 0:e.userPendingReward)?(0,ed.Z)((0,ec.Z)(e.userPendingReward,l[String(null===(r=e.token)||void 0===r?void 0:r.mint)])):null})]},t):void 0}))})]}),(0,n.jsx)(F.Z,{className:"frosted-glass-teal rounded-xl mobile:w-full mobile:py-2 mobile:text-xs whitespace-nowrap",isLoading:S,onClick:()=>{(0,f.Z)(s,{isStaking:!1,rewardAmounts:s.rewards.map(e=>{let{userPendingReward:t}=e;return t}).filter(eu.$u)})},validators:[{should:d,forceActive:!0,fallbackProps:{onClick:()=>o.ZP.setState({isWalletSelectorShown:!0}),children:x?"Connecting...":"Connect Wallet"}},{should:v}],children:"Harvest"})]})]}),(0,n.jsx)(Q.Z,{className:"px-8 py-2 gap-3 items-center self-center justify-center ".concat(r?"bg-[rgba(20,16,65,.2)]":""," mobile:w-full"),children:r?(0,n.jsxs)(Q.Z,{className:"gap-5",children:[(0,n.jsx)(B.Z,{size:"sm",heroIconName:"link",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] clickable clickable-filter-effect",onClick:()=>{(0,en.Z)(new URL("farms/?tab=".concat(g.Z.getState().currentTab,"&farmid=").concat((0,ea.ZP)(s.id)),window.location.origin).toString()).then(()=>{k("Copy Farm Link",(0,n.jsxs)("div",{children:["Farm ID: ",(0,ea.ZP)(s.id)]}))})}}),(0,n.jsx)(B.Z,{size:"sm",heroIconName:"plus",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] clickable clickable-filter-effect",onClick:()=>{(0,N.Eh)("/liquidity/add",{queryProps:{ammId:s.ammId}})}}),(0,n.jsx)(B.Z,{size:"sm",iconSrc:"/icons/msic-swap-h.svg",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] clickable clickable-filter-effect",onClick:()=>{(0,N.Eh)("/swap",{queryProps:{coin1:s.base,coin2:s.quote}})}})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ee.Z,{children:[(0,n.jsx)(B.Z,{size:"smi",heroIconName:"link",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] clickable clickable-filter-effect",onClick:()=>{(0,en.Z)(new URL("farms/?tab=".concat(g.Z.getState().currentTab,"&farmid=").concat((0,ea.ZP)(s.id)),window.location.origin).toString()).then(()=>{k("Copy Farm Link",(0,n.jsxs)("div",{children:["Farm ID: ",(0,ea.ZP)(s.id)]}))})}}),(0,n.jsx)(ee.Z.Panel,{children:"Copy Farm Link"})]}),(0,n.jsxs)(ee.Z,{children:[(0,n.jsx)(B.Z,{size:"smi",heroIconName:"plus",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] clickable clickable-filter-effect",onClick:()=>{(0,N.Eh)("/liquidity/add",{queryProps:{ammId:s.ammId}})}}),(0,n.jsx)(ee.Z.Panel,{children:"Add Liquidity"})]}),(0,n.jsxs)(ee.Z,{children:[(0,n.jsx)(B.Z,{size:"smi",iconSrc:"/icons/msic-swap-h.svg",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] clickable clickable-filter-effect",onClick:()=>{(0,N.Eh)("/swap",{queryProps:{coin1:s.base,coin2:s.quote}})}}),(0,n.jsx)(ee.Z.Panel,{children:"Swap"})]})]})})]}),(0,em.aT)(s.creator,h)&&(0,n.jsx)(Q.Z,{className:"bg-[#14104133] py-3 px-8 justify-end",children:(0,n.jsx)(F.Z,{className:"frosted-glass-teal",size:r?"sm":"md",onClick:()=>{m.Z.setState({isRoutedByCreateOrEdit:!0}),(0,N.Eh)("/farms/edit",{queryProps:{farmInfo:s}})},children:"Edit Farm"})})]})}function eR(){let e=(0,p.Z)(e=>e.connected),t=(0,p.Z)(e=>e.balances),s=(0,p.Z)(e=>e.tokenAccounts),l=(0,g.Z)(e=>e.currentDialogInfo),a=(0,g.Z)(e=>e.isStakeDialogOpen),r=(0,g.Z)(e=>e.stakeDialogMode),[c,d]=(0,i.useState)(),m=(0,o.ZP)(e=>e.isApprovePanelShown),u=(0,i.useMemo)(()=>!!(null==l?void 0:l.lpMint)&&s.some(e=>{let{mint:t}=e;return String(t)===String(null==l?void 0:l.lpMint)}),[s,l]),f=(0,i.useMemo)(()=>"deposit"===r?(null==l?void 0:l.lpMint)&&t[String(l.lpMint)]:null==l?void 0:l.userStakedLpAmount,[l,t,r]),b=(0,i.useMemo)(()=>{if((null==l?void 0:l.lp)&&c)return(0,eo.n)(l.lp,c,{alreadyDecimaled:!0})},[l,c]),Z=(0,i.useRef)(),j=(0,i.useRef)();return(0,n.jsx)($.Z,{open:a,onClose:()=>{d(void 0),g.Z.setState({isStakeDialogOpen:!1,currentDialogInfo:void 0})},placement:"from-bottom",children:t=>{let{close:s}=t;return(0,n.jsxs)(A.Z,{className:"backdrop-filter backdrop-blur-xl p-8 w-[min(468px,100vw)] mobile:w-full border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card",size:"lg",children:[(0,n.jsxs)(Q.Z,{className:"justify-between items-center mb-6",children:[(0,n.jsx)("div",{className:"text-xl font-semibold text-white",children:"withdraw"===r?"Unstake LP":"Stake LP"}),(0,n.jsx)(B.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:s})]}),(0,n.jsx)(L.Z,{className:"mb-6",componentRef:Z,topLeftLabel:"Farm",token:null==l?void 0:l.lp,onUserInput:d,onEnter:e=>{var t,s;e&&(null===(t=j.current)||void 0===t||null===(s=t.click)||void 0===s||s.call(t))},maxValue:"withdraw"===r?null==l?void 0:l.userStakedLpAmount:void 0,topRightLabel:"withdraw"===r?(null==l?void 0:l.userStakedLpAmount)?"Deposited: ".concat((0,ef.B)(null==l?void 0:l.userStakedLpAmount)):"(no deposited)":void 0}),(0,n.jsxs)(Q.Z,{className:"flex-col gap-1",children:[(0,n.jsx)(F.Z,{className:"frosted-glass-teal",componentRef:j,isLoading:m,validators:[{should:e},{should:null==l?void 0:l.lp},{should:c},{should:(0,eu.gt)(b,0)},{should:(0,eu.eg)(f,b),fallbackProps:{children:"Insufficient Lp Balance"}},{should:"withdraw"==r||u,fallbackProps:{children:"No Stakable LP"}}],onClick:()=>{if(!(null==l?void 0:l.lp)||!c)return;let e=(0,eo.n)(l.lp,c,{alreadyDecimaled:!0});("withdraw"===r?(0,h.Z)(l,{isStaking:!1,amount:e}):(0,x.Z)(l,{isStaking:!1,amount:e})).then(()=>{s()})},children:"withdraw"===r?"Unstake LP":"Stake LP"}),(0,n.jsx)(F.Z,{type:"text",disabled:m,className:"text-sm backdrop-filter-none",onClick:s,children:"Cancel"})]})]})}})}function eq(e){let{info:t,className:s}=e,i=(0,o.ZP)(e=>e.isMobile),a=(0,P.ZP)(e=>e.getLpToken),c=(0,P.ZP)(e=>e.getToken),d=!(0,u.aE)(t)&&t.isStablePool,m=(0,g.Z)(e=>e.currentTab),x=(0,r.ZP)(e=>e.programIds),f=(0,k.Z)(e=>e.jsonInfos),h=f.find(e=>e.lpMint===t.lpMint);if((0,u.aE)(t))return a(t.lpMint),(0,n.jsxs)(T.Z,{is:i?"Col":"Row",className:(0,l.m)("flex-wrap items-center mobile:items-start",s),children:[(0,n.jsx)(M.Z,{className:"justify-self-center mr-2",size:i?"sm":"md",token1:c(t.baseMint),token2:c(t.quoteMint)}),(0,n.jsx)("div",{children:c(t.baseMint)&&(0,n.jsxs)(Q.Z,{className:"mobile:text-xs font-medium mobile:mt-px mr-1.5",children:[(0,n.jsx)(ez,{mint:t.baseMint})," - ",(0,n.jsx)(ez,{mint:t.quoteMint})]})})]});let{base:p,quote:b,symbol:Z}=t;return(0,n.jsxs)(T.Z,{is:i?"Col":"Row",className:(0,l.m)("flex-wrap items-center mobile:items-start gap-x-2 gap-y-1",s),children:[(0,n.jsx)(M.Z,{className:"justify-self-center mr-2",size:i?"sm":"md",token1:p,token2:b}),(0,n.jsxs)(Q.Z,{className:"mobile:text-xs font-medium items-center mobile:mt-px mr-1.5",children:[(0,n.jsx)(ez,{mint:t.baseMint}),"-",(0,n.jsx)(ez,{mint:t.quoteMint}),"Ecosystem"===m&&(0,n.jsxs)(ee.Z,{children:[(0,n.jsx)(B.Z,{iconClassName:"ml-1",size:"sm",heroIconName:"information-circle"}),(0,n.jsx)(ee.Z.Panel,{children:(0,n.jsx)("div",{className:"max-w-[300px] space-y-1.5",children:[null==t?void 0:t.baseMint,null==t?void 0:t.quoteMint].map((e,t)=>e?(0,n.jsxs)(Q.Z,{className:"gap-2",children:[c(e)&&(0,n.jsx)(E.Z,{size:"xs",token:c(e)}),(0,n.jsx)(C.U,{className:"grow",showDigitCount:5,addressType:"token",canCopy:!0,canExternalLink:!0,textClassName:"flex text-xs text-[#abc4ff] justify-start ",iconClassName:"text-[#abc4ff]",children:e})]},t):null)})})]})]}),t.isClosedPool&&(0,n.jsx)(I.C,{cssColor:"#DA2EEF",children:"Inactive"}),d&&(0,n.jsx)(I.C,{children:"Stable"}),t.isDualFusionPool&&6!==t.version&&(0,n.jsx)(I.C,{cssColor:"#DA2EEF",children:"Dual Yield"}),t.isNewPool&&(0,n.jsx)(I.C,{cssColor:"#00d1ff",children:"New"}),t.isUpcomingPool&&(0,n.jsx)(I.C,{cssColor:"#5dadee",children:"Upcoming"}),h&&(0,em.$F)(h.marketProgramId,x.OPENBOOK_MARKET)&&(0,n.jsx)(W.$,{})]})}function ez(e){var t,s;let{mint:i}=e,l=(0,P.ZP)(e=>e.getToken),a=(0,P.ZP)(e=>e.tokenListSettings),r=a["UnNamed Token List"].mints,o=l(i);return(null==r?void 0:r.has((0,ea.ZP)(i)))?(0,n.jsxs)(Q.Z,{className:"items-center",children:[(0,n.jsx)("div",{children:null!==(t=null==o?void 0:o.symbol)&&void 0!==t?t:"UNKNOWN"}),(0,n.jsx)("div",{children:(0,n.jsxs)(ee.Z,{children:[(0,n.jsx)(B.Z,{className:"cursor-help",size:"sm",heroIconName:"question-mark-circle"}),(0,n.jsx)(ee.Z.Panel,{children:(0,n.jsxs)("div",{className:"max-w-[220px]",children:[(0,n.jsx)("div",{children:"This token does not currently have a ticker symbol. Check to ensure it is the token you want to interact with."}),(0,n.jsx)(Q.Z,{className:"gap-2 mt-4 w-fit mx-auto",children:(0,n.jsx)(C.U,{className:"grow",showDigitCount:8,addressType:"token",canCopy:!0,canExternalLink:!0,textClassName:"flex text-xs text-[#abc4ff]",iconClassName:"text-[#abc4ff]",children:null==o?void 0:o.mintString})})]})})]})})]}):(0,n.jsx)(n.Fragment,{children:null!==(s=null==o?void 0:o.symbol)&&void 0!==s?s:"UNKNOWN"})}function eB(e){let{name:t,value:s,subValue:i,className:l,loading:a="--"===s||"--"===i}=e,r=(0,o.ZP)(e=>e.isMobile);return(0,n.jsxs)(D.Z,{className:l,children:[r&&(0,n.jsx)("div",{className:" mb-1 text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-2xs",children:t}),(0,n.jsx)(D.Z,{className:"flex-grow justify-center",children:a?(0,n.jsx)(H.Z,{className:"w-4 h-4"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"text-base mobile:text-xs",children:s||"--"}),i&&(0,n.jsx)("div",{className:"text-sm mobile:text-2xs text-[rgba(171,196,255,0.5)]",children:i})]})})]})}}},function(e){e.O(0,[7239,9120,1671,7664,4109,9962,2314,9774,2888,179],function(){return e(e.s=49895)}),_N_E=e.O()}]);