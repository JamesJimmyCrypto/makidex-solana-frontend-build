"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1671],{8667:function(n,e,l){l.d(e,{Kb:function(){return k},ZP:function(){return P},WX:function(){return Z},eq:function(){return E},qC:function(){return I}}),l(50705);var t=l(93513),i=l(34003),r=l(95793),a=l(17097),o=l(72573),s=l(16938),c=l(3363),u=l(76383),d=l(27993),v=l(91371),f=l(96662),h=l(94355),x=l(28013),g=l(80813),y=l(53002),p=l(57751);async function m(n){let{connection:e,wallet:l,txVersion:t,transactions:i}=n,r=await (0,p.KLW)({connection:e,payer:l,innerTransactions:i,makeTxVersion:t});return r}let S=[];async function w(n){var e;let{transaction:l,payload:t,batchOptions:i,cache:r=!0}=n;if(!i||!("_buildArgs"in(e=t.connection))||!("_rpcBatchRequest"in e)||!("_compile"in l)||!("_serialize"in l))return T(l,t,r);{let n;let e=new Promise(e=>{n=e});if(S.push({tx:l,txidPromise:e,resolveFn:n}),S.length===i.allSignedTransactions.length){let n=await j(S.map(n=>n.tx),t);S.forEach((e,l)=>{let{resolveFn:t}=e;t(n[l])}),S.splice(0,S.length)}return e}}async function T(n,e,l){var t,r,a,o;if(null===(t=e.signerkeyPair)||void 0===t?void 0:t.ownerKeypair)return(0,i.Z)(!Z(n),"if use force ownerKeypair, must use transaction, not versionedTransaction"),n.feePayer=null!==(a=null===(r=e.signerkeyPair.payerKeypair)||void 0===r?void 0:r.publicKey)&&void 0!==a?a:e.signerkeyPair.ownerKeypair.publicKey,e.connection.sendTransaction(n,[null!==(o=e.signerkeyPair.payerKeypair)&&void 0!==o?o:e.signerkeyPair.ownerKeypair]);{let t=I(n,{cache:l});return await e.connection.sendRawTransaction(t,{skipPreflight:!0})}}async function j(n,e){let l=n.map(n=>n.serialize().toString("base64")),t=l.map(n=>{let l=e.connection._buildArgs([n],void 0,"base64");return{methodName:"sendTransaction",args:l}}),i=(await e.connection._rpcBatchRequest(t)).map(n=>n.result.value);return i}var N=l(48764).Buffer;function b(n){return(0,a.Kn)(n)&&"instructions"in n&&"instructionTypes"in n}function k(n,e){return l=>P(n(l),(0,u.Gm)(e,{additionalMultiOptionCallback:l,additionalSingleOptionCallback:l}))}let E={};async function P(n,e){var l,r,o,s,c,x,p,m,S;let{transactionCollector:w,collected:{innerTransactions:T,singleTxOptions:j,multiTxOption:N}}=function(n){let e=[],l={},t=[],{additionalSingleOptionCallback:i,additionalMultiOptionCallback:r}=null!=n?n:{},o=(n,l)=>{t.push(n),e.push((0,u.Gm)(null!=l?l:{},i))},s=(n,e)=>{n.forEach(n=>{let[e,l]=Array.isArray(n)?n:[n];o(e,l)}),Object.assign(l,(0,u.Gm)(null!=e?e:{},r))},c=(n,e)=>{let l=(0,a.kJ)(n);if(l){let l=n.map(n=>(0,a.kJ)(n)?[n[0],{...e,...n[1]}]:[n,e]);s(l,e)}else o(n,e)};return{transactionCollector:{add:c},collected:{innerTransactions:t,singleTxOptions:e,multiTxOption:l}}}(e);v.ZP.setState({isApprovePanelShown:!0});try{let{signAllTransactions:a,owner:o,txVersion:s}=y.Z.getState(),c=f.ZP.getState().connection;if((0,i.Z)(c,"no rpc connection"),null==e?void 0:null===(l=e.forceKeyPairs)||void 0===l?void 0:l.ownerKeypair){let l=e.forceKeyPairs.ownerKeypair.publicKey,t=await (0,g.p5)({owner:l,connection:c});await n({transactionCollector:w,baseUtils:{connection:c,owner:l,...t}})}else{let{tokenAccounts:e,allTokenAccounts:l}=y.Z.getState();(0,i.Z)(o,"wallet not connected"),await n({transactionCollector:w,baseUtils:{connection:c,owner:o,tokenAccounts:e,allTokenAccounts:l}})}let d=null!=o?o:null==e?void 0:null===(r=e.forceKeyPairs)||void 0===r?void 0:r.ownerKeypair.publicKey;(0,i.Z)(d,"no owner provided");let h=await A({transactions:T,singleOptions:(0,t.Uy)(j,n=>{n[0]&&(n[0].onTxSentFinally=(0,u.tS)(()=>{v.ZP.setState({isApprovePanelShown:!1})},n[0].onTxSentFinally))}),multiOption:N,payload:{owner:d,connection:c,txVersion:s,signAllTransactions:a,signerkeyPair:null==e?void 0:e.forceKeyPairs}});return v.ZP.setState({isApprovePanelShown:!1}),h}catch(r){let{logError:n}=h.Z.getState();console.warn(r);let e=null!==(S=null==j?void 0:null===(o=j[0])||void 0===o?void 0:null===(s=o.txHistoryInfo)||void 0===s?void 0:s.forceErrorTitle)&&void 0!==S?S:(null!==(m=null==j?void 0:null===(c=j[0])||void 0===c?void 0:null===(x=c.txHistoryInfo)||void 0===x?void 0:x.title)&&void 0!==m?m:"")+" Error",l=r instanceof Error?r.message.replace(/\.$/,""):String(r);(l.includes("versioned transactions isn't supported")||l.includes(".serializeMessage")||l.includes("forEach"))&&(l="Transaction cancelled\nThis wallet might not support Versioned Transaction, turn it off and try again.");let t=(0,d.u)(null==j?void 0:null===(p=j[0])||void 0===p?void 0:p.txErrorNotificationDescription,[r]),i=t||l;return n(e,i),v.ZP.setState({isApprovePanelShown:!1}),{allSuccess:!1,txids:[]}}}let K=new Map;function Z(n){return(0,a.Kn)(n)&&"version"in n}function I(n,e){let l=Z(n)?n.message.recentBlockhash:n.recentBlockhash;if(l&&K.has(l))return K.get(l);{let t=n.serialize();return l&&(null==e?void 0:e.cache)&&K.set(l,t),t}}async function A(n){let{transactions:e,singleOptions:l,multiOption:i,payload:d}=n;return new Promise((n,v)=>(async()=>{let f=[],g=[],y=l=>{if(g.push(l),g.length===e.length){var t;null===(t=i.onTxAllSuccess)||void 0===t||t.call(i,{txids:f}),n({allSuccess:!0,txids:f})}},p=(0,t.Uy)(l,e=>{e.forEach(e=>{e.onTxSentSuccess=(0,u.tS)(n=>{let{txid:e}=n;f.push(e)},e.onTxSentSuccess),e.onTxError=(0,u.tS)(()=>{var e;null===(e=i.onTxAnyError)||void 0===e||e.call(i,{txids:f}),n({allSuccess:!1,txids:f})},e.onTxError),e.onTxSuccess=(0,u.tS)(n=>{let{txid:e}=n;y(e)},e.onTxSuccess)})});try{var S;let n=e.every(b)?await m({connection:d.connection,wallet:d.owner,txVersion:d.txVersion,transactions:e}):e;try{console.info("tx transactions: ",function n(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return!l||(0,r.J_)(e)||(0,a.pt)(e)?e:(0,a.CU)(e)?(0,c.ZP)(e):(0,a.ve)(e)?(0,o.B)(e):(0,a.kJ)(e)?e.map(e=>n(e,l-1)):(0,a.Kn)(e)?(0,s.xh)(e,e=>n(e,l-1)):e}(n),n.map(n=>N.from(n.serialize({requireAllSignatures:!1,verifySignatures:!1})).toString("base64")))}catch(n){console.warn("tx log error")}let l=null===(S=d.signerkeyPair)||void 0===S?void 0:S.ownerKeypair,v=await (l?n:d.signAllTransactions(n));v.forEach(n=>{n.signatures.forEach(n=>{if(n instanceof Uint8Array){if(!n.valueOf().find(n=>0!==n))throw Error("User rejected the request")}else if(n.publicKey.equals(d.owner)&&!n.signature)throw Error("User rejected the request")})});let{mutatedSingleOptions:f,txLoggerControllers:g}=function(n){let{transactions:e,singleOptions:l,multiOption:i}=n,r=l.map((n,l)=>{let{txHistoryInfo:t,...i}=n;return{transaction:e[l],historyInfo:t,...i}}),a=h.Z.getState().logTxid({txInfos:r}),o=(0,t.Uy)(l,n=>{n.forEach(n=>{n.onTxSentSuccess=(0,u.tS)(n=>{var e;let{txid:l,transaction:t}=n;null===(e=a.changeItemInfo)||void 0===e||e.call(a,{txid:l,state:"processing"},{transaction:t})},n.onTxSentSuccess),n.onTxError=(0,u.tS)(n=>{var l;let{txid:t,transaction:i,error:r}=n;null===(l=a.changeItemInfo)||void 0===l||l.call(a,{txid:t,state:"error",error:r},{transaction:i});let o=e.indexOf(i);o<0||e.slice(o+1).forEach(n=>{var e;null===(e=a.changeItemInfo)||void 0===e||e.call(a,{state:"aborted"},{transaction:n})})},n.onTxError),n.onTxSuccess=(0,u.tS)(n=>{var e;let{txid:l,transaction:t}=n;null===(e=a.changeItemInfo)||void 0===e||e.call(a,{txid:l,state:"success"},{transaction:t})},n.onTxSuccess)})}),s=(0,t.Uy)(o,n=>{n.forEach(n=>{var e;let{...l}=null!==(e=n.txHistoryInfo)&&void 0!==e?e:{};n.onTxFinally=(0,u.tS)(n=>{let{txid:e,type:t,passedMultiTxid:i,isMulti:r}=n;x.Z.getState().addHistoryItem({status:"error"===t?"fail":t,txid:e,time:Date.now(),isMulti:r,relativeTxids:i,...l})},n.onTxFinally)})});return{mutatedSingleOptions:s,txLoggerControllers:Array.from({length:e.length}).fill(a)}}({transactions:v,singleOptions:p,multiOption:i}),y=function(n){let{transactions:e,sendMode:l,singleOptions:i,payload:r,txLoggerControllers:a}=n,o={isMulti:e.length>1,passedMultiTxid:Array.from({length:e.length}),multiTransactionLength:e.length,transactions:e};if("parallel(dangerous-without-order)"===l||"parallel(batch-transactions)"===l){let n=()=>{e.forEach((n,e)=>F({transaction:n,wholeTxidInfo:o,payload:r,isBatched:"parallel(batch-transactions)"===l,singleOption:i[e],txLoggerController:a[e]}))};return n}{let n=e.reduceRight((n,e,s)=>{var c;let{fn:d,method:v}=n,f=i[s];return{fn:()=>F({transaction:e,wholeTxidInfo:o,payload:r,singleOption:(0,t.Uy)(f,n=>{"finally"===v?n.onTxFinally=(0,u.tS)(d,n.onTxFinally):"error"===v?n.onTxError=(0,u.tS)(d,n.onTxError):"success"===v&&(n.onTxSuccess=(0,u.tS)(d,n.onTxSuccess))}),txLoggerController:a[s]}),method:null!==(c=f.continueWhenPreviousTx)&&void 0!==c?c:"queue(all-settle)"===l?"finally":"success"}},{fn:()=>{},method:"success"});return n.fn}}({transactions:v,sendMode:i.sendMode,singleOptions:f,payload:d,txLoggerControllers:g});y()}catch(n){v(n)}})())}async function F(n){var e,l,t;let{transaction:r,wholeTxidInfo:a,singleOption:o,payload:s,isBatched:c,txLoggerController:u}=n,d=a.transactions.indexOf(r),v={...a,currentIndex:d};try{let n=await w({transaction:r,payload:s,batchOptions:c?{allSignedTransactions:a.transactions}:void 0,cache:!!(null==o?void 0:o.cacheTransaction)});(0,i.Z)(n,"something went wrong in sending transaction");let l=(e,l)=>{if(n){var t;null==u||null===(t=u.changeItemInfo)||void 0===t||t.call(u,{txid:n,historyInfo:{...null==o?void 0:o.txHistoryInfo,...e,txid:n,status:l,time:Date.now()}},{transaction:r})}};null==o||null===(e=o.onTxSentSuccess)||void 0===e||e.call(o,{transaction:r,txid:n,...v,changeHistoryInfo:n=>l(n,"pending")}),a.passedMultiTxid[d]=n//! ðŸ’© bad method! it's mutate method!
,function(n){let{txid:e,transaction:l,extraTxidInfo:t,callbacks:i}=n,{connection:r}=f.ZP.getState(),{logError:a}=h.Z.getState();if(!r){a("no rpc connection");return}r.onSignature(e,(n,r)=>{var a,o,s,c;n.err?(null==i||null===(a=i.onTxError)||void 0===a||a.call(i,{txid:e,transaction:l,signatureResult:n,context:r,error:n.err,...t}),null==i||null===(o=i.onTxFinally)||void 0===o||o.call(i,{txid:e,transaction:l,signatureResult:n,context:r,type:"error",...t})):(null==i||null===(s=i.onTxSuccess)||void 0===s||s.call(i,{txid:e,transaction:l,signatureResult:n,context:r,...t}),null==i||null===(c=i.onTxFinally)||void 0===c||c.call(i,{txid:e,transaction:l,signatureResult:n,context:r,type:"success",...t}))},"processed"),r.getSignatureStatus(e)}({txid:n,transaction:r,extraTxidInfo:v,callbacks:{onTxSuccess(n){var e;null==o||null===(e=o.onTxSuccess)||void 0===e||e.call(o,{...n,...v,changeHistoryInfo:n=>l(n,"success")})},onTxError(n){var e;console.error("tx error: ",n.error),null==o||null===(e=o.onTxError)||void 0===e||e.call(o,{...n,...v,changeHistoryInfo:n=>l(n,"fail")})},onTxFinally(n){var e;null==o||null===(e=o.onTxFinally)||void 0===e||e.call(o,{...n,...v})}}})}catch(n){console.error("fail to send tx: ",n),null==o||null===(l=o.onTxSentError)||void 0===l||l.call(o,{err:n,...v})}finally{null==o||null===(t=o.onTxSentFinally)||void 0===t||t.call(o)}}},70745:function(n,e,l){l.d(e,{Z:function(){return a}});var t=l(85893),i=l(66180),r=l(40471);function a(n){var e;let{noCoinIconBorder:l,haveAnime:a,iconSrc:o,token:s,isOptionToken:c,domRef:u,className:d,size:v="md",style:f,isRewardBadge:h,isRewardEnd:x,onClick:g}=n,y=null!==(e=null!=o?o:null==s?void 0:s.icons)&&void 0!==e?e:null==s?void 0:s.icon,p=!l,m="2xl"===v?"h-20 w-20":"lg"===v?"h-12 w-12":"md"===v?"h-8 w-8":"sm"===v?"h-5 w-5":"smi"===v?"h-6 w-6":"xs"===v?"w-4 h-4":"h-12 w-12";return(0,t.jsxs)(t.Fragment,{children:[x&&(0,t.jsx)(r.Z,{className:"h-8 w-8 rounded-full overflow-hidden ",src:"/icons/diagonal.svg",fallbackSrc:"/coins/unknown.svg",style:{position:"absolute",zIndex:100,opacity:20}}),(0,t.jsx)("div",{ref:u,className:"CoinAvatar flex items-center  ".concat(h?"rounded-full ring-1 ring-[#616A9D] p-1":""," ").concat(x?"opacity-30 ring-[#7B7EAF]":""," "),style:f,onClick:g,children:a?(0,t.jsxs)("div",{className:(0,i.m)("".concat(m," rounded-full swap-coin"),d),suppressHydrationWarning:!0,style:{"--delay":"".concat((1e3*Math.random()).toFixed(2),"ms")},children:[(0,t.jsx)(r.Z,{className:"front-face overflow-hidden transition-transform transform ".concat(p?"scale-[.7]":""),src:y,fallbackSrc:"/coins/unknown.svg"}),(0,t.jsxs)("div",{className:"line-group",children:[(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})}),(0,t.jsx)("div",{className:"line-out",children:(0,t.jsx)("div",{className:"line-inner"})})]}),(0,t.jsx)(r.Z,{className:"back-face overflow-hidden transition-transform transform ".concat(p?"scale-[.7]":""),src:y,fallbackSrc:"/coins/unknown.svg"})]}):(0,t.jsxs)("div",{className:(0,i.m)("".concat(m," relative rounded-full"),d),style:{background:"linear-gradient(126.6deg, rgba(171, 196, 255, 0.2) 28.69%, rgba(171, 196, 255, 0) 100%)"},children:[(0,t.jsx)(r.Z,{className:"".concat(m," rounded-full overflow-hidden transition-transform transform ").concat(p?"scale-[.7]":""),src:y,fallbackSrc:"/coins/unknown.svg"}),!1]})})]})}}}]);